{"ast":null,"code":"const API = \"http://localhost:5000\";\nexport const login = async (voterId, password, mfaToken = null) => {\n  try {\n    const res = await fetch(`${API}/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        voterId,\n        password,\n        mfaToken\n      })\n    });\n    return await res.json();\n  } catch (error) {\n    return {\n      success: false,\n      message: \"Network error\"\n    };\n  }\n};\nexport const vote = async (voterId, candidate) => {\n  const sessionToken = localStorage.getItem('sessionToken');\n  const sessionSignature = localStorage.getItem('sessionSignature');\n  try {\n    const res = await fetch(`${API}/vote`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        voterId,\n        candidate,\n        sessionToken,\n        sessionSignature\n      })\n    });\n    return await res.json();\n  } catch (error) {\n    return {\n      success: false,\n      message: \"Network error\"\n    };\n  }\n};\nexport const logout = async () => {\n  const sessionToken = localStorage.getItem('sessionToken');\n  try {\n    await fetch(`${API}/logout`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        sessionToken\n      })\n    });\n  } catch (error) {\n    console.error(\"Logout error:\", error);\n  } finally {\n    localStorage.removeItem('sessionToken');\n    localStorage.removeItem('sessionSignature');\n    localStorage.removeItem('userData');\n  }\n};\nexport const results = async () => {\n  try {\n    const res = await fetch(`${API}/results`);\n    const data = await res.json();\n    return data.success ? data.results : {};\n  } catch (error) {\n    return {};\n  }\n};\nexport const setupMFA = async () => {\n  const sessionToken = localStorage.getItem('sessionToken');\n  const sessionSignature = localStorage.getItem('sessionSignature');\n  try {\n    const res = await fetch(`${API}/mfa/setup`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        sessionToken,\n        sessionSignature\n      })\n    });\n    return await res.json();\n  } catch (error) {\n    return {\n      success: false,\n      message: \"Network error\"\n    };\n  }\n};\nexport const verifyMFASetup = async (secret, token) => {\n  const sessionToken = localStorage.getItem('sessionToken');\n  const sessionSignature = localStorage.getItem('sessionSignature');\n  try {\n    const res = await fetch(`${API}/mfa/verify-setup`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        sessionToken,\n        sessionSignature,\n        secret,\n        token\n      })\n    });\n    return await res.json();\n  } catch (error) {\n    return {\n      success: false,\n      message: \"Network error\"\n    };\n  }\n};\nexport const disableMFA = async password => {\n  const sessionToken = localStorage.getItem('sessionToken');\n  const sessionSignature = localStorage.getItem('sessionSignature');\n  try {\n    const res = await fetch(`${API}/mfa/disable`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        sessionToken,\n        sessionSignature,\n        password\n      })\n    });\n    return await res.json();\n  } catch (error) {\n    return {\n      success: false,\n      message: \"Network error\"\n    };\n  }\n};","map":{"version":3,"names":["API","login","voterId","password","mfaToken","res","fetch","method","headers","body","JSON","stringify","json","error","success","message","vote","candidate","sessionToken","localStorage","getItem","sessionSignature","logout","console","removeItem","results","data","setupMFA","verifyMFASetup","secret","token","disableMFA"],"sources":["C:/Users/TARUN/Desktop/B.Tech/Sem-06/Cyber/smart-voting-system/frontend/voting-ui/src/services.js"],"sourcesContent":["const API = \"http://localhost:5000\";\r\n\r\nexport const login = async (voterId, password, mfaToken = null) => {\r\n    try {\r\n        const res = await fetch(`${API}/login`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ voterId, password, mfaToken })\r\n        });\r\n        return await res.json();\r\n    } catch (error) {\r\n        return { success: false, message: \"Network error\" };\r\n    }\r\n};\r\n\r\nexport const vote = async (voterId, candidate) => {\r\n    const sessionToken = localStorage.getItem('sessionToken');\r\n    const sessionSignature = localStorage.getItem('sessionSignature');\r\n\r\n    try {\r\n        const res = await fetch(`${API}/vote`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ voterId, candidate, sessionToken, sessionSignature })\r\n        });\r\n        return await res.json();\r\n    } catch (error) {\r\n        return { success: false, message: \"Network error\" };\r\n    }\r\n};\r\n\r\nexport const logout = async () => {\r\n    const sessionToken = localStorage.getItem('sessionToken');\r\n\r\n    try {\r\n        await fetch(`${API}/logout`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ sessionToken })\r\n        });\r\n    } catch (error) {\r\n        console.error(\"Logout error:\", error);\r\n    } finally {\r\n        localStorage.removeItem('sessionToken');\r\n        localStorage.removeItem('sessionSignature');\r\n        localStorage.removeItem('userData');\r\n    }\r\n};\r\n\r\nexport const results = async () => {\r\n    try {\r\n        const res = await fetch(`${API}/results`);\r\n        const data = await res.json();\r\n        return data.success ? data.results : {};\r\n    } catch (error) {\r\n        return {};\r\n    }\r\n};\r\n\r\nexport const setupMFA = async () => {\r\n    const sessionToken = localStorage.getItem('sessionToken');\r\n    const sessionSignature = localStorage.getItem('sessionSignature');\r\n\r\n    try {\r\n        const res = await fetch(`${API}/mfa/setup`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ sessionToken, sessionSignature })\r\n        });\r\n        return await res.json();\r\n    } catch (error) {\r\n        return { success: false, message: \"Network error\" };\r\n    }\r\n};\r\n\r\nexport const verifyMFASetup = async (secret, token) => {\r\n    const sessionToken = localStorage.getItem('sessionToken');\r\n    const sessionSignature = localStorage.getItem('sessionSignature');\r\n\r\n    try {\r\n        const res = await fetch(`${API}/mfa/verify-setup`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ sessionToken, sessionSignature, secret, token })\r\n        });\r\n        return await res.json();\r\n    } catch (error) {\r\n        return { success: false, message: \"Network error\" };\r\n    }\r\n};\r\n\r\nexport const disableMFA = async (password) => {\r\n    const sessionToken = localStorage.getItem('sessionToken');\r\n    const sessionSignature = localStorage.getItem('sessionSignature');\r\n\r\n    try {\r\n        const res = await fetch(`${API}/mfa/disable`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ sessionToken, sessionSignature, password })\r\n        });\r\n        return await res.json();\r\n    } catch (error) {\r\n        return { success: false, message: \"Network error\" };\r\n    }\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}